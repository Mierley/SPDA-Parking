<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">
    
    <changeSet id="create-parking-place-table" author="mierley">
        <createTable tableName="parking_place">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="tag" type="varchar"/>
            <column name="is_lock" type="boolean"/>
        </createTable>
    </changeSet>
    
    <changeSet id="create-application-table" author="mierley">
        <createTable tableName="application">
            <column name="id" type="bigint" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="driver_name" type="varchar"/>
            <column name="car_details" type="varchar"/>
            <column name="phone_number" type="varchar"/>
            <column name="date_from" type="datetime"/>
            <column name="date_to" type="datetime"/>
            <column name="parking_place_id" type="bigint">
                <constraints references="parking_place(id)" foreignKeyName="fk_parking_place_id" nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="insert-initial-parking-places" author="habur331">
        <sql dbms="postgresql">
            INSERT INTO parking_place (tag, is_lock) VALUES
                                                         ('A1', false),
                                                         ('A2', false),
                                                         ('A3', false),
                                                         ('A4', false),
                                                         ('A5', false),
                                                         ('B1', false),
                                                         ('B2', false),
                                                         ('B3', false),
                                                         ('B4', false),
                                                         ('B5', false),
                                                         ('C1', false),
                                                         ('C2', false),
                                                         ('C3', false),
                                                         ('C4', false),
                                                         ('C5', false),
                                                         ('D1', false),
                                                         ('D2', false),
                                                         ('D3', false),
                                                         ('D4', false),
                                                         ('D5', false),
                                                         ('E1', false),
                                                         ('E2', false),
                                                         ('E3', false),
                                                         ('E4', false),
                                                         ('E5', false),
                                                         ('F1', false),
                                                         ('F2', false),
                                                         ('F3', false),
                                                         ('F4', false),
                                                         ('F5', false),
                                                         ('G1', false),
                                                         ('G2', false),
                                                         ('G3', false),
                                                         ('G4', false),
                                                         ('G5', false),
                                                         ('H1', false),
                                                         ('H2', false),
                                                         ('H3', false),
                                                         ('H4', false),
                                                         ('H5', false),
                                                         ('I1', false),
                                                         ('I2', false),
                                                         ('I3', false),
                                                         ('I4', false),
                                                         ('I5', false);
        </sql>
    </changeSet>
    <changeSet id="insert-initial-parking-places-2" author="habur331">
        <sql dbms="postgresql">
            INSERT INTO parking_place (tag, is_lock) VALUES
                                                         ('J1', false),
                                                         ('J2', false),
                                                         ('J3', false),
                                                         ('J4', false),
                                                         ('J5', false),
                                                         ('K1', false),
                                                         ('K2', false),
                                                         ('K3', false),
                                                         ('K4', false),
                                                         ('K5', false),
                                                         ('L1', false),
                                                         ('L2', false),
                                                         ('L3', false),
                                                         ('L4', false),
                                                         ('L5', false);
        </sql>
    </changeSet>
    <changeSet id="insert-initial-application" author="mierley">
        <sql dbms="postgresql">
            update java.application
            set date_to = '2024-05-25 08:00:00'
            where date_to is null;


            update java.parking_place
            set is_lock = false
            where is_lock = true;

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-03-26 09:15:00', '2024-03-26 11:45:00', 32);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-02-26 09:15:00', '2024-02-26 11:45:00', 31);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-03-21 09:15:00', '2024-03-21 11:45:00', 11);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-01-26 09:15:00', '2024-01-26 11:45:00', 3);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-03-26 09:15:00', '2024-03-26 11:45:00', 2);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-03-26 09:15:00', '2024-03-26 11:45:00', 52);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-02-26 09:15:00', '2024-02-26 11:45:00', 11);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-01-01 06:15:00', '2024-01-01 11:45:00', 16);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-06-16 09:15:00', '2024-06-16 19:45:00', 23);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+71234567890', '2024-02-06 09:15:00', '2024-02-06 11:45:00', 29);




            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+79990001111', '2024-01-01 06:15:00', NULL, 16);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+79990001111', '2024-06-16 09:15:00', NULL, 23);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+79990001111', '2024-02-06 09:15:00', NULL, 29);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+79990001111', '2024-01-01 06:15:00', NULL, 6);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+79990001111', '2024-06-16 09:15:00', NULL, 13);

            INSERT INTO java.application
            (driver_name, car_details, phone_number, date_from, date_to, parking_place_id)
            VALUES('Андрианов Андрей Викторович', 'Honda Civic XYZ456', '+79990001111', '2024-02-06 09:15:00', NULL, 59);

        </sql>
    </changeSet>

</databaseChangeLog>
